<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Travel Planner - Plan Your Perfect Trip</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
            color: white;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .header p {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        .stats-bar {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: white;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            text-align: center;
            transition: transform 0.2s ease;
        }

        .stat-card:hover {
            transform: translateY(-2px);
        }

        .stat-value {
            font-size: 2rem;
            font-weight: bold;
            color: #667eea;
            margin-bottom: 5px;
        }

        .stat-label {
            color: #666;
            font-size: 0.9rem;
        }

        .tabs {
            display: flex;
            background: white;
            border-radius: 12px;
            padding: 6px;
            margin-bottom: 30px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            overflow-x: auto;
        }

        .tab {
            flex: 1;
            padding: 12px 20px;
            text-align: center;
            background: transparent;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s ease;
            white-space: nowrap;
            min-width: 100px;
        }

        .tab.active {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .tab:hover:not(.active) {
            background: #f8f9fa;
        }

        .tab-content {
            display: none;
            background: white;
            border-radius: 12px;
            padding: 30px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            min-height: 500px;
        }

        .tab-content.active {
            display: block;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: #333;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #e1e5e9;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s ease;
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #667eea;
        }

        .btn {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s ease;
            font-size: 16px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
        }

        .btn-secondary {
            background: #6c757d;
        }

        .btn-danger {
            background: #dc3545;
        }

        .btn-small {
            padding: 8px 16px;
            font-size: 14px;
        }

        .card {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
            transition: all 0.3s ease;
        }

        .card:hover {
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .card-title {
            font-size: 1.2rem;
            font-weight: 600;
            color: #333;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e9ecef;
            border-radius: 4px;
            overflow: hidden;
            margin: 10px 0;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(135deg, #667eea, #764ba2);
            transition: width 0.3s ease;
        }

        .timeline {
            position: relative;
            padding-left: 30px;
        }

        .timeline::before {
            content: '';
            position: absolute;
            left: 15px;
            top: 0;
            bottom: 0;
            width: 2px;
            background: #e9ecef;
        }

        .timeline-item {
            position: relative;
            margin-bottom: 30px;
            padding-left: 30px;
        }

        .timeline-item::before {
            content: '';
            position: absolute;
            left: -23px;
            top: 0;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: #667eea;
            border: 3px solid white;
            box-shadow: 0 0 0 3px #667eea;
        }

        .timeline-item.completed::before {
            background: #28a745;
            box-shadow: 0 0 0 3px #28a745;
        }

        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: #6c757d;
        }

        .empty-state h3 {
            margin-bottom: 10px;
            font-size: 1.5rem;
        }

        .empty-state p {
            margin-bottom: 20px;
        }

        .map-container {
            height: 400px;
            background: #f8f9fa;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 20px;
            border: 2px dashed #dee2e6;
        }

        .budget-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            background: white;
            border-radius: 8px;
            margin-bottom: 10px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }

        .budget-category {
            font-weight: 500;
        }

        .budget-amount {
            font-weight: 600;
            color: #667eea;
        }

        .alert {
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .alert-warning {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            color: #856404;
        }

        .alert-danger {
            background: #f8d7da;
            border: 1px solid #f5c6cb;
            color: #721c24;
        }

        .task-item {
            display: flex;
            align-items: center;
            padding: 15px;
            background: white;
            border-radius: 8px;
            margin-bottom: 10px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }

        .task-checkbox {
            margin-right: 15px;
            width: 20px;
            height: 20px;
        }

        .task-content {
            flex: 1;
        }

        .task-title {
            font-weight: 500;
            margin-bottom: 5px;
        }

        .task-meta {
            font-size: 0.9rem;
            color: #6c757d;
        }

        .priority-high {
            border-left: 4px solid #dc3545;
        }

        .priority-medium {
            border-left: 4px solid #ffc107;
        }

        .priority-low {
            border-left: 4px solid #28a745;
        }

        .export-section {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin-top: 20px;
        }

        .export-buttons {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .hidden {
            display: none !important;
        }

        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            .header h1 {
                font-size: 2rem;
            }
            
            .tabs {
                flex-direction: column;
            }
            
            .tab {
                text-align: left;
                padding: 15px;
            }
            
            .form-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Travel Planner</h1>
            <p>Plan your perfect trip with our comprehensive travel planning tool</p>
        </div>

        <div class="stats-bar">
            <div class="stat-card">
                <div class="stat-value" id="totalDays">0</div>
                <div class="stat-label">Days</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="totalBudget">$0</div>
                <div class="stat-label">Budget</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="completionRate">0%</div>
                <div class="stat-label">Completion</div>
            </div>
        </div>

        <div class="tabs">
            <button class="tab active" data-tab="overview">Overview</button>
            <button class="tab" data-tab="planning">Planning</button>
            <button class="tab" data-tab="map">Visual Map</button>
            <button class="tab" data-tab="budget">Budget</button>
            <button class="tab" data-tab="documents">Documents</button>
            <button class="tab" data-tab="tasks">Tasks</button>
            <button class="tab" data-tab="summary">Summary</button>
        </div>

        <!-- Overview Tab -->
        <div id="overview" class="tab-content active">
            <h2 style="margin-bottom: 30px;">Trip Overview</h2>
            <div class="form-grid">
                <div class="form-group">
                    <label for="tripName">Trip Name</label>
                    <input type="text" id="tripName" placeholder="Enter your trip name">
                </div>
                <div class="form-group">
                    <label for="startDate">Start Date</label>
                    <input type="date" id="startDate">
                </div>
                <div class="form-group">
                    <label for="endDate">End Date</label>
                    <input type="date" id="endDate">
                </div>
                <div class="form-group">
                    <label for="currency">Currency</label>
                    <select id="currency">
                        <option value="USD">USD ($)</option>
                        <option value="EUR">EUR (‚Ç¨)</option>
                        <option value="GBP">GBP (¬£)</option>
                        <option value="JPY">JPY (¬•)</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="totalBudgetInput">Total Budget</label>
                    <input type="number" id="totalBudgetInput" placeholder="Enter total budget">
                </div>
                <div class="form-group">
                    <label for="travelStyle">Travel Style</label>
                    <select id="travelStyle">
                        <option value="budget">Budget Travel</option>
                        <option value="comfort">Comfort Travel</option>
                        <option value="luxury">Luxury Travel</option>
                        <option value="adventure">Adventure Travel</option>
                        <option value="business">Business Travel</option>
                    </select>
                </div>
            </div>
            <button class="btn" id="saveOverviewBtn">Save Overview</button>
        </div>

        <!-- Planning Tab -->
        <div id="planning" class="tab-content">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px;">
                <h2>Trip Planning</h2>
                <button class="btn" id="showAddDayBtn">Add Day</button>
            </div>
            
            <div id="addDayForm" class="hidden">
                <div class="card">
                    <h3>Add New Day</h3>
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="dayDate">Date</label>
                            <input type="date" id="dayDate">
                        </div>
                        <div class="form-group">
                            <label for="dayLocation">Location</label>
                            <input type="text" id="dayLocation" placeholder="Enter location">
                        </div>
                        <div class="form-group">
                            <label for="dayTransport">Transportation</label>
                            <input type="text" id="dayTransport" placeholder="Flight, train, car...">
                        </div>
                        <div class="form-group">
                            <label for="dayAccommodation">Accommodation</label>
                            <input type="text" id="dayAccommodation" placeholder="Hotel, Airbnb...">
                        </div>
                        <div class="form-group">
                            <label for="dayCost">Estimated Cost</label>
                            <input type="number" id="dayCost" placeholder="0">
                        </div>
                        <div class="form-group">
                            <label for="dayNotes">Notes</label>
                            <textarea id="dayNotes" placeholder="Additional notes..."></textarea>
                        </div>
                    </div>
                    <div style="display: flex; gap: 10px;">
                        <button class="btn" id="addDayBtn">Add Day</button>
                        <button class="btn btn-secondary" id="cancelDayBtn">Cancel</button>
                    </div>
                </div>
            </div>

            <div id="daysList">
                <div class="empty-state">
                    <h3>No days planned yet</h3>
                    <p>Start by adding your first day to begin planning your trip</p>
                    <button class="btn" id="addFirstDayBtn">Add First Day</button>
                </div>
            </div>
        </div>

        <!-- Visual Map Tab -->
        <div id="map" class="tab-content">
            <h2 style="margin-bottom: 30px;">Visual Map & Timeline</h2>
            
            <div class="map-container">
                <div style="text-align: center;">
                    <h3>Interactive Map</h3>
                    <p>Map visualization will show your route with colored markers</p>
                    <p style="margin-top: 10px; color: #667eea;">üó∫Ô∏è Add locations in the Planning tab to see them here</p>
                </div>
            </div>

            <h3 style="margin-bottom: 20px;">Trip Timeline</h3>
            <div id="timeline" class="timeline">
                <div class="empty-state">
                    <h3>No timeline yet</h3>
                    <p>Add days to your trip to see the timeline</p>
                </div>
            </div>
        </div>

        <!-- Budget Tab -->
        <div id="budget" class="tab-content">
            <h2 style="margin-bottom: 30px;">Budget Tracker</h2>
            
            <div id="budgetAlerts"></div>
            
            <div class="form-grid">
                <div class="form-group">
                    <label for="budgetCategory">Category</label>
                    <select id="budgetCategory">
                        <option value="accommodation">Accommodation</option>
                        <option value="transport">Transportation</option>
                        <option value="food">Food & Dining</option>
                        <option value="activities">Activities</option>
                        <option value="shopping">Shopping</option>
                        <option value="other">Other</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="budgetAmount">Amount</label>
                    <input type="number" id="budgetAmount" placeholder="0">
                </div>
                <div class="form-group">
                    <label for="budgetDescription">Description</label>
                    <input type="text" id="budgetDescription" placeholder="Description...">
                </div>
                <div class="form-group" style="display: flex; align-items: end;">
                    <button class="btn" id="addBudgetBtn">Add Expense</button>
                </div>
            </div>

            <div style="margin-top: 30px;">
                <h3>Budget Breakdown</h3>
                <div class="progress-bar">
                    <div class="progress-fill" id="budgetProgress" style="width: 0%"></div>
                </div>
                <div id="budgetList">
                    <div class="empty-state">
                        <h3>No expenses yet</h3>
                        <p>Start tracking your expenses to manage your budget</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Documents Tab -->
        <div id="documents" class="tab-content">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px;">
                <h2>Travel Documents</h2>
                <button class="btn" id="showAddDocBtn">Add Document</button>
            </div>

            <div id="addDocumentForm" class="hidden">
                <div class="card">
                    <h3>Add Document</h3>
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="docType">Document Type</label>
                            <select id="docType">
                                <option value="flight">Flight Booking</option>
                                <option value="hotel">Hotel Reservation</option>
                                <option value="car">Car Rental</option>
                                <option value="activity">Activity Booking</option>
                                <option value="insurance">Travel Insurance</option>
                                <option value="passport">Passport/Visa</option>
                                <option value="other">Other</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="docName">Document Name</label>
                            <input type="text" id="docName" placeholder="Enter document name">
                        </div>
                        <div class="form-group">
                            <label for="docReference">Reference Number</label>
                            <input type="text" id="docReference" placeholder="Booking reference, ticket number...">
                        </div>
                        <div class="form-group">
                            <label for="docDate">Date</label>
                            <input type="date" id="docDate">
                        </div>
                        <div class="form-group">
                            <label for="docNotes">Notes</label>
                            <textarea id="docNotes" placeholder="Additional notes..."></textarea>
                        </div>
                    </div>
                    <div style="display: flex; gap: 10px;">
                        <button class="btn" id="addDocBtn">Add Document</button>
                        <button class="btn btn-secondary" id="cancelDocBtn">Cancel</button>
                    </div>
                </div>
            </div>

            <div id="documentsList">
                <div class="empty-state">
                    <h3>No documents yet</h3>
                    <p>Add your travel documents to keep everything organized</p>
                    <button class="btn" id="addFirstDocBtn">Add First Document</button>
                </div>
            </div>
        </div>

        <!-- Tasks Tab -->
        <div id="tasks" class="tab-content">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px;">
                <h2>Travel Tasks</h2>
                <button class="btn" id="showAddTaskBtn">Add Task</button>
            </div>

            <div id="addTaskForm" class="hidden">
                <div class="card">
                    <h3>Add Task</h3>
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="taskTitle">Task Title</label>
                            <input type="text" id="taskTitle" placeholder="Enter task title">
                        </div>
                        <div class="form-group">
                            <label for="taskPriority">Priority</label>
                            <select id="taskPriority">
                                <option value="high">High</option>
                                <option value="medium">Medium</option>
                                <option value="low">Low</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="taskDueDate">Due Date</label>
                            <input type="date" id="taskDueDate">
                        </div>
                        <div class="form-group">
                            <label for="taskDescription">Description</label>
                            <textarea id="taskDescription" placeholder="Task description..."></textarea>
                        </div>
                    </div>
                    <div style="display: flex; gap: 10px;">
                        <button class="btn" id="addTaskBtn">Add Task</button>
                        <button class="btn btn-secondary" id="cancelTaskBtn">Cancel</button>
                    </div>
                </div>
            </div>

            <div id="tasksList">
                <div class="empty-state">
                    <h3>No tasks yet</h3>
                    <p>Add tasks to stay organized before and during your trip</p>
                    <button class="btn" id="addFirstTaskBtn">Add First Task</button>
                </div>
            </div>
        </div>

        <!-- Summary Tab -->
        <div id="summary" class="tab-content">
            <h2 style="margin-bottom: 30px;">Trip Summary</h2>
            
            <div id="summaryContent">
                <div class="empty-state">
                    <h3>Complete your trip details</h3>
                    <p>Fill in the other tabs to see your complete trip summary</p>
                </div>
            </div>

            <div class="export-section">
                <h3 style="margin-bottom: 15px;">Export Options</h3>
                <div class="export-buttons">
                    <button class="btn" id="exportCSVBtn">Export to CSV</button>
                    <button class="btn btn-secondary" id="copyClipboardBtn">Copy to Clipboard</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Application State
        const TravelPlanner = {
            // Data
            tripInfo: {
                name: '',
                startDate: '',
                endDate: '',
                currency: 'USD',
                totalBudget: 0,
                travelStyle: 'budget'
            },
            tripData: [],
            budgetData: [],
            documentsData: [],
            tasksData: [],

            // Initialize the application
            init() {
                this.bindEvents();
                this.loadData();
                this.updateStats();
                this.renderAll();
            },

            // Bind all event listeners
            bindEvents() {
                // Tab navigation
                document.querySelectorAll('.tab').forEach(tab => {
                    tab.addEventListener('click', (e) => {
                        const tabName = e.target.getAttribute('data-tab');
                        this.showTab(tabName);
                    });
                });

                // Overview events
                const saveOverviewBtn = document.getElementById('saveOverviewBtn');
                if (saveOverviewBtn) {
                    saveOverviewBtn.addEventListener('click', () => this.saveOverview());
                }

                // Planning events
                this.bindPlanningEvents();
                
                // Budget events
                this.bindBudgetEvents();
                
                // Documents events
                this.bindDocumentEvents();
                
                // Tasks events
                this.bindTaskEvents();
                
                // Export events
                this.bindExportEvents();
            },

            bindPlanningEvents() {
                const showAddDayBtn = document.getElementById('showAddDayBtn');
                const addFirstDayBtn = document.getElementById('addFirstDayBtn');
                const addDayBtn = document.getElementById('addDayBtn');
                const cancelDayBtn = document.getElementById('cancelDayBtn');

                if (showAddDayBtn) showAddDayBtn.addEventListener('click', () => this.showAddDayForm());
                if (addFirstDayBtn) addFirstDayBtn.addEventListener('click', () => this.showAddDayForm());
                if (addDayBtn) addDayBtn.addEventListener('click', () => this.addDay());
                if (cancelDayBtn) cancelDayBtn.addEventListener('click', () => this.hideAddDayForm());
            },

            bindBudgetEvents() {
                const addBudgetBtn = document.getElementById('addBudgetBtn');
                if (addBudgetBtn) addBudgetBtn.addEventListener('click', () => this.addBudgetItem());
            },

            bindDocumentEvents() {
                const showAddDocBtn = document.getElementById('showAddDocBtn');
                const addFirstDocBtn = document.getElementById('addFirstDocBtn');
                const addDocBtn = document.getElementById('addDocBtn');
                const cancelDocBtn = document.getElementById('cancelDocBtn');

                if (showAddDocBtn) showAddDocBtn.addEventListener('click', () => this.showAddDocumentForm());
                if (addFirstDocBtn) addFirstDocBtn.addEventListener('click', () => this.showAddDocumentForm());
                if (addDocBtn) addDocBtn.addEventListener('click', () => this.addDocument());
                if (cancelDocBtn) cancelDocBtn.addEventListener('click', () => this.hideAddDocumentForm());
            },

            bindTaskEvents() {
                const showAddTaskBtn = document.getElementById('showAddTaskBtn');
                const addFirstTaskBtn = document.getElementById('addFirstTaskBtn');
                const addTaskBtn = document.getElementById('addTaskBtn');
                const cancelTaskBtn = document.getElementById('cancelTaskBtn');

                if (showAddTaskBtn) showAddTaskBtn.addEventListener('click', () => this.showAddTaskForm());
                if (addFirstTaskBtn) addFirstTaskBtn.addEventListener('click', () => this.showAddTaskForm());
                if (addTaskBtn) addTaskBtn.addEventListener('click', () => this.addTask());
                if (cancelTaskBtn) cancelTaskBtn.addEventListener('click', () => this.hideAddTaskForm());
            },

            bindExportEvents() {
                const exportCSVBtn = document.getElementById('exportCSVBtn');
                const copyClipboardBtn = document.getElementById('copyClipboardBtn');

                if (exportCSVBtn) exportCSVBtn.addEventListener('click', () => this.exportToCSV());
                if (copyClipboardBtn) copyClipboardBtn.addEventListener('click', () => this.copyToClipboard());
            },

            // Tab functionality
            showTab(tabName) {
                // Hide all tabs
                document.querySelectorAll('.tab-content').forEach(tab => {
                    tab.classList.remove('active');
                });
                document.querySelectorAll('.tab').forEach(tab => {
                    tab.classList.remove('active');
                });

                // Show selected tab
                const targetTab = document.getElementById(tabName);
                if (targetTab) {
                    targetTab.classList.add('active');
                }
                
                // Activate the clicked tab button
                const activeTabBtn = document.querySelector(`[data-tab="${tabName}"]`);
                if (activeTabBtn) {
                    activeTabBtn.classList.add('active');
                }

                // Update content based on tab
                if (tabName === 'map') {
                    this.renderTimeline();
                } else if (tabName === 'summary') {
                    this.renderSummary();
                }
            },

            // Overview functions
            saveOverview() {
                const tripName = document.getElementById('tripName');
                const startDate = document.getElementById('startDate');
                const endDate = document.getElementById('endDate');
                const currency = document.getElementById('currency');
                const totalBudgetInput = document.getElementById('totalBudgetInput');
                const travelStyle = document.getElementById('travelStyle');

                this.tripInfo = {
                    name: tripName ? tripName.value : '',
                    startDate: startDate ? startDate.value : '',
                    endDate: endDate ? endDate.value : '',
                    currency: currency ? currency.value : 'USD',
                    totalBudget: totalBudgetInput ? parseFloat(totalBudgetInput.value) || 0 : 0,
                    travelStyle: travelStyle ? travelStyle.value : 'budget'
                };
                
                this.saveData();
                this.updateStats();
                alert('Overview saved successfully!');
            },

            // Planning functions
            showAddDayForm() {
                const form = document.getElementById('addDayForm');
                if (form) form.classList.remove('hidden');
            },

            hideAddDayForm() {
                const form = document.getElementById('addDayForm');
                if (form) form.classList.add('hidden');
                this.clearDayForm();
            },

            clearDayForm() {
                const fields = ['dayDate', 'dayLocation', 'dayTransport', 'dayAccommodation', 'dayCost', 'dayNotes'];
                fields.forEach(fieldId => {
                    const field = document.getElementById(fieldId);
                    if (field) field.value = '';
                });
            },

            addDay() {
                const dayDate = document.getElementById('dayDate');
                const dayLocation = document.getElementById('dayLocation');
                const dayTransport = document.getElementById('dayTransport');
                const dayAccommodation = document.getElementById('dayAccommodation');
                const dayCost = document.getElementById('dayCost');
                const dayNotes = document.getElementById('dayNotes');

                const day = {
                    id: Date.now(),
                    date: dayDate ? dayDate.value : '',
                    location: dayLocation ? dayLocation.value : '',
                    transport: dayTransport ? dayTransport.value : '',
                    accommodation: dayAccommodation ? dayAccommodation.value : '',
                    cost: dayCost ? parseFloat(dayCost.value) || 0 : 0,
                    notes: dayNotes ? dayNotes.value : '',
                    completed: false
                };

                this.tripData.push(day);
                this.saveData();
                this.renderDays();
                this.hideAddDayForm();
                this.updateStats();
            },

            renderDays() {
                const daysList = document.getElementById('daysList');
                if (!daysList) return;
                
                if (this.tripData.length === 0) {
                    daysList.innerHTML = `
                        <div class="empty-state">
                            <h3>No days planned yet</h3>
                            <p>Start by adding your first day to begin planning your trip</p>
                            <button class="btn" id="addFirstDayBtn">Add First Day</button>
                        </div>
                    `;
                    // Re-bind the button
                    const addFirstDayBtn = document.getElementById('addFirstDayBtn');
                    if (addFirstDayBtn) addFirstDayBtn.addEventListener('click', () => this.showAddDayForm());
                    return;
                }

                daysList.innerHTML = this.tripData.map(day => `
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">${day.date} - ${day.location}</div>
                            <div>
                                <button class="btn btn-small ${day.completed ? 'btn-secondary' : ''}" onclick="TravelPlanner.toggleDayCompletion(${day.id})">
                                    ${day.completed ? 'Completed' : 'Mark Complete'}
                                </button>
                                <button class="btn btn-danger btn-small" onclick="TravelPlanner.removeDay(${day.id})">Remove</button>
                            </div>
                        </div>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
                            <div><strong>Transport:</strong> ${day.transport || 'Not specified'}</div>
                            <div><strong>Accommodation:</strong> ${day.accommodation || 'Not specified'}</div>
                            <div><strong>Cost:</strong> ${this.getCurrencySymbol()}${day.cost}</div>
                        </div>
                        ${day.notes ? `<div style="margin-top: 10px;"><strong>Notes:</strong> ${day.notes}</div>` : ''}
                    </div>
                `).join('');
            },

            toggleDayCompletion(id) {
                const day = this.tripData.find(d => d.id === id);
                if (day) {
                    day.completed = !day.completed;
                    this.saveData();
                    this.renderDays();
                    this.updateStats();
                }
            },

            removeDay(id) {
                if (confirm('Are you sure you want to remove this day?')) {
                    this.tripData = this.tripData.filter(d => d.id !== id);
                    this.saveData();
                    this.renderDays();
                    this.updateStats();
                }
            },

            // Budget functions
            addBudgetItem() {
                const budgetCategory = document.getElementById('budgetCategory');
                const budgetAmount = document.getElementById('budgetAmount');
                const budgetDescription = document.getElementById('budgetDescription');

                const amount = budgetAmount ? parseFloat(budgetAmount.value) || 0 : 0;

                if (amount <= 0) {
                    alert('Please enter a valid amount');
                    return;
                }

                const budgetItem = {
                    id: Date.now(),
                    category: budgetCategory ? budgetCategory.value : 'other',
                    amount: amount,
                    description: budgetDescription ? budgetDescription.value : '',
                    date: new Date().toISOString().split('T')[0]
                };

                this.budgetData.push(budgetItem);
                this.saveData();
                this.renderBudget();
                this.updateStats();
                this.clearBudgetForm();
            },

            clearBudgetForm() {
                const budgetAmount = document.getElementById('budgetAmount');
                const budgetDescription = document.getElementById('budgetDescription');
                if (budgetAmount) budgetAmount.value = '';
                if (budgetDescription) budgetDescription.value = '';
            },

            renderBudget() {
                const budgetList = document.getElementById('budgetList');
                const budgetAlerts = document.getElementById('budgetAlerts');
                if (!budgetList) return;
                
                if (this.budgetData.length === 0) {
                    budgetList.innerHTML = `
                        <div class="empty-state">
                            <h3>No expenses yet</h3>
                            <p>Start tracking your expenses to manage your budget</p>
                        </div>
                    `;
                } else {
                    const totalSpent = this.budgetData.reduce((sum, item) => sum + item.amount, 0);
                    const budgetPercentage = this.tripInfo.totalBudget > 0 ? (totalSpent / this.tripInfo.totalBudget) * 100 : 0;
                    
                    const budgetProgress = document.getElementById('budgetProgress');
                    if (budgetProgress) {
                        budgetProgress.style.width = Math.min(budgetPercentage, 100) + '%';
                    }

                    // Budget alerts
                    let alertsHtml = '';
                    if (budgetPercentage >= 90) {
                        alertsHtml = '<div class="alert alert-danger">‚ö†Ô∏è You have exceeded 90% of your budget!</div>';
                    } else if (budgetPercentage >= 75) {
                        alertsHtml = '<div class="alert alert-warning">‚ö†Ô∏è You have used 75% of your budget</div>';
                    }
                    if (budgetAlerts) budgetAlerts.innerHTML = alertsHtml;

                    // Group by category
                    const categoryTotals = {};
                    this.budgetData.forEach(item => {
                        categoryTotals[item.category] = (categoryTotals[item.category] || 0) + item.amount;
                    });

                    budgetList.innerHTML = `
                        <div style="margin-bottom: 20px;">
                            <h4>By Category</h4>
                            ${Object.entries(categoryTotals).map(([category, amount]) => `
                                <div class="budget-item">
                                    <span class="budget-category">${category.charAt(0).toUpperCase() + category.slice(1)}</span>
                                    <span class="budget-amount">${this.getCurrencySymbol()}${amount.toFixed(2)}</span>
                                </div>
                            `).join('')}
                        </div>
                        <div>
                            <h4>Recent Expenses</h4>
                            ${this.budgetData.slice(-5).reverse().map(item => `
                                <div class="budget-item">
                                    <div>
                                        <div class="budget-category">${item.description || item.category}</div>
                                        <div style="font-size: 0.9rem; color: #6c757d;">${item.date}</div>
                                    </div>
                                    <span class="budget-amount">${this.getCurrencySymbol()}${item.amount.toFixed(2)}</span>
                                </div>
                            `).join('')}
                        </div>
                    `;
                }
            },

            // Documents functions
            showAddDocumentForm() {
                const form = document.getElementById('addDocumentForm');
                if (form) form.classList.remove('hidden');
            },

            hideAddDocumentForm() {
                const form = document.getElementById('addDocumentForm');
                if (form) form.classList.add('hidden');
                this.clearDocumentForm();
            },

            clearDocumentForm() {
                const fields = ['docName', 'docReference', 'docDate', 'docNotes'];
                fields.forEach(fieldId => {
                    const field = document.getElementById(fieldId);
                    if (field) field.value = '';
                });
            },

            addDocument() {
                const docType = document.getElementById('docType');
                const docName = document.getElementById('docName');
                const docReference = document.getElementById('docReference');
                const docDate = document.getElementById('docDate');
                const docNotes = document.getElementById('docNotes');

                const name = docName ? docName.value : '';
                if (!name) {
                    alert('Please enter a document name');
                    return;
                }

                const doc = {
                    id: Date.now(),
                    type: docType ? docType.value : 'other',
                    name: name,
                    reference: docReference ? docReference.value : '',
                    date: docDate ? docDate.value : '',
                    notes: docNotes ? docNotes.value : ''
                };

                this.documentsData.push(doc);
                this.saveData();
                this.renderDocuments();
                this.hideAddDocumentForm();
            },

            renderDocuments() {
                const documentsList = document.getElementById('documentsList');
                if (!documentsList) return;
                
                if (this.documentsData.length === 0) {
                    documentsList.innerHTML = `
                        <div class="empty-state">
                            <h3>No documents yet</h3>
                            <p>Add your travel documents to keep everything organized</p>
                            <button class="btn" id="addFirstDocBtn">Add First Document</button>
                        </div>
                    `;
                    // Re-bind the button
                    const addFirstDocBtn = document.getElementById('addFirstDocBtn');
                    if (addFirstDocBtn) addFirstDocBtn.addEventListener('click', () => this.showAddDocumentForm());
                    return;
                }

                documentsList.innerHTML = this.documentsData.map(doc => `
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">${doc.name}</div>
                            <button class="btn btn-danger btn-small" onclick="TravelPlanner.removeDocument(${doc.id})">Remove</button>
                        </div>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
                            <div><strong>Type:</strong> ${doc.type.charAt(0).toUpperCase() + doc.type.slice(1)}</div>
                            <div><strong>Reference:</strong> ${doc.reference || 'N/A'}</div>
                            <div><strong>Date:</strong> ${doc.date || 'N/A'}</div>
                        </div>
                        ${doc.notes ? `<div style="margin-top: 10px;"><strong>Notes:</strong> ${doc.notes}</div>` : ''}
                    </div>
                `).join('');
            },

            removeDocument(id) {
                if (confirm('Are you sure you want to remove this document?')) {
                    this.documentsData = this.documentsData.filter(d => d.id !== id);
                    this.saveData();
                    this.renderDocuments();
                }
            },

            // Tasks functions
            showAddTaskForm() {
                const form = document.getElementById('addTaskForm');
                if (form) form.classList.remove('hidden');
            },

            hideAddTaskForm() {
                const form = document.getElementById('addTaskForm');
                if (form) form.classList.add('hidden');
                this.clearTaskForm();
            },

            clearTaskForm() {
                const fields = ['taskTitle', 'taskDueDate', 'taskDescription'];
                fields.forEach(fieldId => {
                    const field = document.getElementById(fieldId);
                    if (field) field.value = '';
                });
            },

            addTask() {
                const taskTitle = document.getElementById('taskTitle');
                const taskPriority = document.getElementById('taskPriority');
                const taskDueDate = document.getElementById('taskDueDate');
                const taskDescription = document.getElementById('taskDescription');

                const title = taskTitle ? taskTitle.value : '';
                if (!title) {
                    alert('Please enter a task title');
                    return;
                }

                const task = {
                    id: Date.now(),
                    title: title,
                    priority: taskPriority ? taskPriority.value : 'medium',
                    dueDate: taskDueDate ? taskDueDate.value : '',
                    description: taskDescription ? taskDescription.value : '',
                    completed: false
                };

                this.tasksData.push(task);
                this.saveData();
                this.renderTasks();
                this.hideAddTaskForm();
                this.updateStats();
            },

            renderTasks() {
                const tasksList = document.getElementById('tasksList');
                if (!tasksList) return;
                
                if (this.tasksData.length === 0) {
                    tasksList.innerHTML = `
                        <div class="empty-state">
                            <h3>No tasks yet</h3>
                            <p>Add tasks to stay organized before and during your trip</p>
                            <button class="btn" id="addFirstTaskBtn">Add First Task</button>
                        </div>
                    `;
                    // Re-bind the button
                    const addFirstTaskBtn = document.getElementById('addFirstTaskBtn');
                    if (addFirstTaskBtn) addFirstTaskBtn.addEventListener('click', () => this.showAddTaskForm());
                    return;
                }

                tasksList.innerHTML = this.tasksData.map(task => `
                    <div class="task-item priority-${task.priority}">
                        <input type="checkbox" class="task-checkbox" ${task.completed ? 'checked' : ''} 
                               onchange="TravelPlanner.toggleTaskCompletion(${task.id})">
                        <div class="task-content">
                            <div class="task-title" style="${task.completed ? 'text-decoration: line-through; opacity: 0.6;' : ''}">${task.title}</div>
                            <div class="task-meta">
                                Priority: ${task.priority.toUpperCase()} 
                                ${task.dueDate ? `| Due: ${task.dueDate}` : ''}
                                ${task.description ? `| ${task.description}` : ''}
                            </div>
                        </div>
                        <button class="btn btn-danger btn-small" onclick="TravelPlanner.removeTask(${task.id})">Remove</button>
                    </div>
                `).join('');
            },

            toggleTaskCompletion(id) {
                const task = this.tasksData.find(t => t.id === id);
                if (task) {
                    task.completed = !task.completed;
                    this.saveData();
                    this.renderTasks();
                    this.updateStats();
                }
            },

            removeTask(id) {
                if (confirm('Are you sure you want to remove this task?')) {
                    this.tasksData = this.tasksData.filter(t => t.id !== id);
                    this.saveData();
                    this.renderTasks();
                    this.updateStats();
                }
            },

            // Timeline and Map functions
            renderTimeline() {
                const timeline = document.getElementById('timeline');
                if (!timeline) return;
                
                if (this.tripData.length === 0) {
                    timeline.innerHTML = `
                        <div class="empty-state">
                            <h3>No timeline yet</h3>
                            <p>Add days to your trip to see the timeline</p>
                        </div>
                    `;
                    return;
                }

                const sortedDays = [...this.tripData].sort((a, b) => new Date(a.date) - new Date(b.date));
                
                timeline.innerHTML = sortedDays.map(day => `
                    <div class="timeline-item ${day.completed ? 'completed' : ''}">
                        <div class="card">
                            <div class="card-header">
                                <div class="card-title">${day.date} - ${day.location}</div>
                                <div style="font-size: 0.9rem; color: ${day.completed ? '#28a745' : '#6c757d'};">
                                    ${day.completed ? '‚úÖ Completed' : '‚è≥ Pending'}
                                </div>
                            </div>
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 10px; font-size: 0.9rem;">
                                <div><strong>Transport:</strong> ${day.transport || 'N/A'}</div>
                                <div><strong>Stay:</strong> ${day.accommodation || 'N/A'}</div>
                                <div><strong>Cost:</strong> ${this.getCurrencySymbol()}${day.cost}</div>
                            </div>
                            ${day.notes ? `<div style="margin-top: 10px; font-size: 0.9rem; color: #6c757d;">${day.notes}</div>` : ''}
                        </div>
                    </div>
                `).join('');
            },

            // Summary functions
            renderSummary() {
                const summaryContent = document.getElementById('summaryContent');
                if (!summaryContent) return;
                
                if (!this.tripInfo.name && this.tripData.length === 0) {
                    summaryContent.innerHTML = `
                        <div class="empty-state">
                            <h3>Complete your trip details</h3>
                            <p>Fill in the other tabs to see your complete trip summary</p>
                        </div>
                    `;
                    return;
                }

                const totalSpent = this.budgetData.reduce((sum, item) => sum + item.amount, 0);
                const completedDays = this.tripData.filter(day => day.completed).length;
                const completedTasks = this.tasksData.filter(task => task.completed).length;
                
                summaryContent.innerHTML = `
                    <div class="form-grid">
                        <div class="card">
                            <h3>Trip Overview</h3>
                            <div><strong>Name:</strong> ${this.tripInfo.name || 'Untitled Trip'}</div>
                            <div><strong>Dates:</strong> ${this.tripInfo.startDate || 'TBD'} - ${this.tripInfo.endDate || 'TBD'}</div>
                            <div><strong>Style:</strong> ${this.tripInfo.travelStyle || 'Not specified'}</div>
                            <div><strong>Currency:</strong> ${this.tripInfo.currency}</div>
                        </div>
                        
                        <div class="card">
                            <h3>Budget Summary</h3>
                            <div><strong>Total Budget:</strong> ${this.getCurrencySymbol()}${this.tripInfo.totalBudget}</div>
                            <div><strong>Total Spent:</strong> ${this.getCurrencySymbol()}${totalSpent.toFixed(2)}</div>
                            <div><strong>Remaining:</strong> ${this.getCurrencySymbol()}${(this.tripInfo.totalBudget - totalSpent).toFixed(2)}</div>
                            <div class="progress-bar" style="margin-top: 10px;">
                                <div class="progress-fill" style="width: ${Math.min((totalSpent / this.tripInfo.totalBudget) * 100, 100)}%"></div>
                            </div>
                        </div>
                        
                        <div class="card">
                            <h3>Progress</h3>
                            <div><strong>Days Planned:</strong> ${this.tripData.length}</div>
                            <div><strong>Days Completed:</strong> ${completedDays}</div>
                            <div><strong>Tasks Completed:</strong> ${completedTasks}/${this.tasksData.length}</div>
                            <div><strong>Documents:</strong> ${this.documentsData.length}</div>
                        </div>
                    </div>

                    ${this.tripData.length > 0 ? `
                        <div style="margin-top: 30px;">
                            <h3>Itinerary</h3>
                            ${this.tripData.sort((a, b) => new Date(a.date) - new Date(b.date)).map(day => `
                                <div class="card">
                                    <div style="display: flex; justify-content: space-between; align-items: center;">
                                        <div>
                                            <strong>${day.date} - ${day.location}</strong>
                                            <div style="font-size: 0.9rem; color: #6c757d; margin-top: 5px;">
                                                ${day.transport ? `üöó ${day.transport}` : ''} 
                                                ${day.accommodation ? `üè® ${day.accommodation}` : ''}
                                            </div>
                                        </div>
                                        <div style="text-align: right;">
                                            <div><strong>${this.getCurrencySymbol()}${day.cost}</strong></div>
                                            <div style="font-size: 0.9rem; color: ${day.completed ? '#28a745' : '#6c757d'};">
                                                ${day.completed ? '‚úÖ Done' : '‚è≥ Pending'}
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            `).join('')}
                        </div>
                    ` : ''}
                `;
            },

            // Export functions
            exportToCSV() {
                const csvData = [];
                
                // Add trip overview
                csvData.push(['Trip Overview']);
                csvData.push(['Name', this.tripInfo.name || 'Untitled Trip']);
                csvData.push(['Start Date', this.tripInfo.startDate || 'TBD']);
                csvData.push(['End Date', this.tripInfo.endDate || 'TBD']);
                csvData.push(['Total Budget', `${this.getCurrencySymbol()}${this.tripInfo.totalBudget}`]);
                csvData.push(['Travel Style', this.tripInfo.travelStyle]);
                csvData.push([]);

                // Add itinerary
                if (this.tripData.length > 0) {
                    csvData.push(['Itinerary']);
                    csvData.push(['Date', 'Location', 'Transport', 'Accommodation', 'Cost', 'Notes', 'Completed']);
                    this.tripData.forEach(day => {
                        csvData.push([
                            day.date,
                            day.location,
                            day.transport || '',
                            day.accommodation || '',
                            day.cost,
                            day.notes || '',
                            day.completed ? 'Yes' : 'No'
                        ]);
                    });
                    csvData.push([]);
                }

                // Add budget
                if (this.budgetData.length > 0) {
                    csvData.push(['Budget']);
                    csvData.push(['Date', 'Category', 'Description', 'Amount']);
                    this.budgetData.forEach(item => {
                        csvData.push([
                            item.date,
                            item.category,
                            item.description || '',
                            item.amount
                        ]);
                    });
                    csvData.push([]);
                }

                // Add tasks
                if (this.tasksData.length > 0) {
                    csvData.push(['Tasks']);
                    csvData.push(['Title', 'Priority', 'Due Date', 'Description', 'Completed']);
                    this.tasksData.forEach(task => {
                        csvData.push([
                            task.title,
                            task.priority,
                            task.dueDate || '',
                            task.description || '',
                            task.completed ? 'Yes' : 'No'
                        ]);
                    });
                }

                // Convert to CSV string
                const csvString = csvData.map(row => 
                    row.map(cell => `"${cell}"`).join(',')
                ).join('\n');

                // Download CSV
                const blob = new Blob([csvString], { type: 'text/csv' });
                const url = window.URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `${this.tripInfo.name || 'trip'}-plan.csv`;
                a.click();
                window.URL.revokeObjectURL(url);
            },

            copyToClipboard() {
                const summary = this.generateTextSummary();
                if (navigator.clipboard) {
                    navigator.clipboard.writeText(summary).then(() => {
                        alert('Trip summary copied to clipboard!');
                    }).catch(() => {
                        alert('Failed to copy to clipboard');
                    });
                } else {
                    alert('Clipboard not supported in this browser');
                }
            },

            generateTextSummary() {
                let summary = `TRIP SUMMARY\n${'='.repeat(50)}\n\n`;
                
                summary += `Trip: ${this.tripInfo.name || 'Untitled Trip'}\n`;
                summary += `Dates: ${this.tripInfo.startDate || 'TBD'} - ${this.tripInfo.endDate || 'TBD'}\n`;
                summary += `Budget: ${this.getCurrencySymbol()}${this.tripInfo.totalBudget}\n`;
                summary += `Style: ${this.tripInfo.travelStyle}\n\n`;

                if (this.tripData.length > 0) {
                    summary += `ITINERARY\n${'-'.repeat(30)}\n`;
                    this.tripData.sort((a, b) => new Date(a.date) - new Date(b.date)).forEach(day => {
                        summary += `${day.date} - ${day.location}\n`;
                        if (day.transport) summary += `  Transport: ${day.transport}\n`;
                        if (day.accommodation) summary += `  Stay: ${day.accommodation}\n`;
                        summary += `  Cost: ${this.getCurrencySymbol()}${day.cost}\n`;
                        if (day.notes) summary += `  Notes: ${day.notes}\n`;
                        summary += `  Status: ${day.completed ? 'Completed' : 'Pending'}\n\n`;
                    });
                }

                if (this.budgetData.length > 0) {
                    const totalSpent = this.budgetData.reduce((sum, item) => sum + item.amount, 0);
                    summary += `BUDGET BREAKDOWN\n${'-'.repeat(30)}\n`;
                    summary += `Total Spent: ${this.getCurrencySymbol()}${totalSpent.toFixed(2)}\n`;
                    summary += `Remaining: ${this.getCurrencySymbol()}${(this.tripInfo.totalBudget - totalSpent).toFixed(2)}\n\n`;
                }

                if (this.tasksData.length > 0) {
                    const completedTasks = this.tasksData.filter(task => task.completed).length;
                    summary += `TASKS\n${'-'.repeat(30)}\n`;
                    summary += `Completed: ${completedTasks}/${this.tasksData.length}\n\n`;
                }

                return summary;
            },

            // Utility functions
            getCurrencySymbol() {
                const symbols = {
                    'USD': ',
                    'EUR': '‚Ç¨',
                    'GBP': '¬£',
                    'JPY': '¬•'
                };
                return symbols[this.tripInfo.currency] || ';
            },

            updateStats() {
                // Calculate days
                let totalDays = 0;
                if (this.tripInfo.startDate && this.tripInfo.endDate) {
                    const start = new Date(this.tripInfo.startDate);
                    const end = new Date(this.tripInfo.endDate);
                    totalDays = Math.ceil((end - start) / (1000 * 60 * 60 * 24)) + 1;
                }

                // Calculate budget
                const totalSpent = this.budgetData.reduce((sum, item) => sum + item.amount, 0);

                // Calculate completion rate
                const totalItems = this.tripData.length + this.tasksData.length;
                const completedItems = this.tripData.filter(d => d.completed).length + this.tasksData.filter(t => t.completed).length;
                const completionRate = totalItems > 0 ? Math.round((completedItems / totalItems) * 100) : 0;

                // Update display
                const totalDaysEl = document.getElementById('totalDays');
                const totalBudgetEl = document.getElementById('totalBudget');
                const completionRateEl = document.getElementById('completionRate');
                
                if (totalDaysEl) totalDaysEl.textContent = totalDays;
                if (totalBudgetEl) totalBudgetEl.textContent = `${this.getCurrencySymbol()}${totalSpent.toFixed(0)}`;
                if (completionRateEl) completionRateEl.textContent = `${completionRate}%`;
            },

            saveData() {
                const data = {
                    tripInfo: this.tripInfo,
                    tripData: this.tripData,
                    budgetData: this.budgetData,
                    documentsData: this.documentsData,
                    tasksData: this.tasksData
                };
                // Store in memory for this session
                window.travelPlannerData = data;
            },

            loadData() {
                try {
                    if (window.travelPlannerData) {
                        const data = window.travelPlannerData;
                        this.tripInfo = data.tripInfo || this.tripInfo;
                        this.tripData = data.tripData || [];
                        this.budgetData = data.budgetData || [];
                        this.documentsData = data.documentsData || [];
                        this.tasksData = data.tasksData || [];
                    }

                    // Load into form fields
                    if (this.tripInfo.name) {
                        const tripNameEl = document.getElementById('tripName');
                        const startDateEl = document.getElementById('startDate');
                        const endDateEl = document.getElementById('endDate');
                        const currencyEl = document.getElementById('currency');
                        const totalBudgetEl = document.getElementById('totalBudgetInput');
                        const travelStyleEl = document.getElementById('travelStyle');
                        
                        if (tripNameEl) tripNameEl.value = this.tripInfo.name;
                        if (startDateEl) startDateEl.value = this.tripInfo.startDate;
                        if (endDateEl) endDateEl.value = this.tripInfo.endDate;
                        if (currencyEl) currencyEl.value = this.tripInfo.currency;
                        if (totalBudgetEl) totalBudgetEl.value = this.tripInfo.totalBudget;
                        if (travelStyleEl) travelStyleEl.value = this.tripInfo.travelStyle;
                    }
                } catch (error) {
                    console.log('Error loading data:', error);
                }
            },

            renderAll() {
                this.renderDays();
                this.renderBudget();
                this.renderDocuments();
                this.renderTasks();
                this.renderTimeline();
                this.renderSummary();
            }
        };

        // Initialize the application when DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            TravelPlanner.init();
        });

        // Make TravelPlanner globally accessible for onclick handlers
        window.TravelPlanner = TravelPlanner;
    </script>
</body>
</html>
